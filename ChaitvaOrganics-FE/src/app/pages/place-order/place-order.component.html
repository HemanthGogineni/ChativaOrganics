<div class="modal-backdrop" *ngIf="showModal">
    <div class="modal-content">
        <h3>Payment Instructions</h3>
        <p>Please upload transaction screenshot here below and submit. Only then your payment gets completed</p>
        <button class="close-btn" (click)="closeModal()">Continue</button>
    </div>
</div>
<div class="modal-backdrop" *ngIf="noTransactionUploaded">
    <div class="modal-content">
        <h3>Alert!</h3>
        <p>Please upload a transaction screenshot before placing the order.</p>
        <button class="close-trans-btn" (click)="closeTransactionModal()">Upload</button>
    </div>
</div>

<div class="container-xxl py-6">
    <div class="upi-container">
        <!-- QR Code Section -->
        <div class="qr-section">
            <ng-container *ngIf="qrImageBase64; else loading">
                <img [src]="qrImageBase64" alt="QR Code" />
            </ng-container>
        </div>

        <!-- Divider -->
        <div class="or-divider">
            <span>OR</span>
        </div>

        <ng-container *ngIf="paymentLinks.default; else loading">
            <div class="upi-grid">
                <a [href]="paymentLinks.default" target="_blank" class="upi-card default">
                    <img src="/assets/img/upi.svg" alt="UPI" class="upi-icon" />
                    <span>UPI</span>
                </a>
                <a [href]="paymentLinks.phonepe" target="_blank" class="upi-card phonepe">
                    <img src="/assets/img/phonepay.svg" alt="PhonePe" class="upi-icon" />
                    <span>PhonePe</span>
                </a>
                <a [href]="paymentLinks.gpay" target="_blank" class="upi-card gpay">
                    <img src="/assets/img/gpay.svg" alt="Google Pay" class="upi-icon" />
                    <span>Google Pay</span>
                </a>
                <a [href]="paymentLinks.paytm" target="_blank" class="upi-card paytm">
                    <img src="/assets/img/paytm.svg" alt="Paytm" class="upi-icon" />
                    <span>Paytm</span>
                </a>
            </div>
        </ng-container>
        <ng-template #loading>
            <p>Loading payment options...</p>
        </ng-template>


    </div>

</div>

<!-- Loading Template -->
<ng-template #loading>
    <p>Waiting for payment details...</p>
</ng-template>

<!-- Upload Section -->
<div class="upload-section">
    <label for="screenshotUpload">Upload Payment Screenshot:</label>
    <input type="file" id="screenshotUpload" (change)="onFileSelected($event)" />

    <button (click)="finalOrder()" [disabled]="isSubmitting">
        {{ isSubmitting ? 'Submitting...' : 'Submit' }}
    </button>
</div>
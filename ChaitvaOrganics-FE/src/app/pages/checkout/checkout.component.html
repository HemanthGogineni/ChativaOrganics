<div class="checkout-container">
    <div class="checkout-left">
        <h2>Shipping Information</h2>
        <form #checkoutForm="ngForm" (ngSubmit)="placeOrder(checkoutForm)" novalidate>
            <div class="form-group">
                <label>Email</label>
                <input type="email" class="form-control" name="email" [(ngModel)]="checkout.email" required
                    #email="ngModel" />
                <div class="error" *ngIf="email.invalid && (email.touched || checkoutForm.submitted)">
                    <div *ngIf="email.errors?.['required']">Email is required.</div>
                    <div *ngIf="email.errors?.['email']">Invalid email format.</div>
                </div>
            </div>
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" class="form-control" name="fullName" [(ngModel)]="checkout.fullName" required
                    #fullName="ngModel" />
                <div class="error" *ngIf="fullName.invalid && (fullName.touched || checkoutForm.submitted)">
                    Full name is required.
                </div>
            </div>

            <div class="form-group">
                <label>Address</label>
                <textarea class="form-control" name="address" [(ngModel)]="checkout.address" required
                    #address="ngModel"></textarea>
                <div class="error" *ngIf="address.invalid && (address.touched || checkoutForm.submitted)">
                    Address is required.
                </div>
            </div>

            <!-- PHONE NUMBER -->
            <div class="form-group">
                <label>Phone Number</label>
                <input type="text" class="form-control" name="phone" [(ngModel)]="checkout.phone" required
                    pattern="^[6-9]\d{9}$" #phone="ngModel" />
                <div class="error" *ngIf="phone.invalid && (phone.touched || checkoutForm.submitted)">
                    <div *ngIf="phone.errors?.['required']">Phone number is required.</div>
                    <div *ngIf="phone.errors?.['pattern']">Phone must be a 10-digit number starting with 6-9.</div>
                </div>
            </div>


            <h3>Payment Method</h3>
            <div class="form-group">
                <select class="form-control" name="paymentMethod" [(ngModel)]="checkout.paymentMethod" required
                    #paymentMethod="ngModel">
                    <option value="" disabled>Select Payment Method</option>
                    <option>UPI</option>
                </select>
                <div class="error" *ngIf="paymentMethod.invalid && (paymentMethod.touched || checkoutForm.submitted)">
                    Please select a payment method.
                </div>
            </div>

            <!-- ✅ Don't disable the button -->
            <button type="submit" class="btn-checkout">
                Place Order
            </button>
        </form>
    </div>

    <div class="checkout-right">
        <h2>Your Order</h2>
        <div *ngIf="cartItems.length > 0; else empty">
            <div class="cart-summary" *ngFor="let item of cartItems">
                <div class="cart-summary-image">
                    <img [src]="'assets/img/product-imgs/' + item.image" alt="{{ item.name }}" />
                </div>
                <div class="cart-summary-details">
                    <p class="item-name">{{ item.name }}</p>
                    <p>Qty: {{ item.quantity }}</p>
                    <p>Price: ₹{{ item.price * item.quantity }}</p>
                </div>
            </div>

            <hr />
            <div class="totals">
                <p>Subtotal: ₹{{ subtotal }}</p>
                <h3>Grand Total: ₹{{ total }}</h3>
            </div>
        </div>

        <ng-template #empty>
            <p>Your cart is empty.</p>
        </ng-template>
    </div>
</div>